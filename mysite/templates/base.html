{% load static tailwind_tags %}

<!DOCTYPE html>
<html lang="en">
	<head>
    

    <title>Django Tailwind</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		{% tailwind_css %}
        <script src="../static/js/mysite.js">

        </script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/date-fns"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
	</head>
    <style>
        .active{
          font-weight: 900;
          font-size: large;
        }
        #myScrollspy{
            transition: background-color 0.5s;
        }
        #dropdownMenu{
            transition: opacity 0.5s;
        }
      </style>
      <nav class='w-screen h-[80px] z-20 fixed drop-shadow-lg top-0 fadeIn  text-black bg-white'  id="myScrollspy" >
        <div class='px-2 flex w-full h-full justify-between'>
          <div class='flex items-center flex-row'>
                <a class='text-3xl font-bold mr-4 sm:text-4xl h-[80px] w-[80px]' href="/">
                    <img id="logowhite" {% if self.transparent %} class=""  {% else %} class="hidden"  {% endif %} src="../../static/assets/Logo_weiÃŸ.png" alt="">
                    <img id="logoschwarz" {% if self.transparent %} class="hidden" {% else %}   {% endif %}  src="../../static/assets/Logo_schwarz.png" alt="">
                </a>
                <a class='text-3xl font-extrabold mr-4 sm:text-4xl pt-2 hidden sm:inline-block' href="/">TRACKER</a>
          </div>
          <div class='flex items-center'>
          <ul class='hidden md:flex items-center'>
                        <li ><a class="m-4 nbar projekte" href="/tracker/metrics" >METRICS</a></li>
                        <li ><a class="p-4 nbar projekte" href="/tracker/createWorkout" >ADD TRAINING</a></li>
                        <li ><a class="p-4 nbar ablauf" href="/tracker/record" >RECORD</a></li>
          </ul>
          <div class="hidden md:flex pr-4">
            {% if user.is_authenticated %}
            <form class="site-form" action="/authuser/logout/" method="post">
                {% csrf_token %}
                <input type="submit" value="LOGOUT" />
            
            <!-- 
            <form class="site-form" action="/authuser/logout/" method="post">
                {% csrf_token %}
                <input class="px-8 ml-4 py-3 solidButton button-primary" type="submit" value="LOGOUT" />
            </form>
            -->
            {% else %}
            <a
              class="px-8 ml-4 py-3 solidButton button-primary"
              href="/authuser/login"
              >LOGIN</a
            >
            {% endif %}
          </div>
            <!-- <div class='hidden md:flex pr-4'>
            <a class='px-8 ml-4 py-3 solidButton' href="/authuser/signup">PROFILE</a>
            </div> -->
            <button class="md:hidden mr-4" onclick="dropDown()" id="dropButton"> 
                <svg class="{% if self.transparent %} fill-white {% else %} fill-black {% endif %}" id="burgerMenu" viewBox="0 0 100 80" width="32" height="32">
                    <rect width="100" height="15"></rect>
                    <rect y="30" width="100" height="15"></rect>
                    <rect y="60" width="100" height="15"></rect>
                  </svg>
            </button>
          </div>
        </div>
        <ul class="absolute bg-white text-black w-full px-8 text-center opacity-0 md:hidden" id="dropdownMenu">
            <li ><a class="m-4 nbar projekte" href="/#projekte" >METRICS</a></li>
            <li ><a class="m-4 nbar projekte" href="/#projekte" >ADD TRAINING</a></li>
            <li ><a class="m-4 nbar ablauf" href="/#ablauf" >RECORD</a></li>
        
      
          <div class='flex flex-col my-4 '>
              <a class='px-8 py-3 solidButton' href="/kontakt">PROFILE</a>
          </div>
        </ul> 
      </nav>
      
      <div class="mb-[120px]">

            {% block content %}
             {% endblock %}
      </div>
      
      
      
      <script>
        window.addEventListener('DOMContentLoaded', event => {
        
        // Navbar shrink function
        var navbarShrink = function () {
            const navbarCollapsible = document.body.querySelector('.trans');
            const burgerMenu = document.body.querySelector('#burgerMenu');
            
            if (!navbarCollapsible) {
                return;
            }
            if (window.scrollY === 0) {
                navbarCollapsible.classList.add('text-white')
                document.getElementById("logoschwarz").classList.add("hidden");
                document.getElementById("logowhite").classList.remove("hidden");
                navbarCollapsible.classList.remove('bg-white')
                burgerMenu.classList.add('fill-white')
                burgerMenu.classList.remove('fill-black')
                document.getElementById("dropdownMenu").classList.add("opacity-0");
                document.getElementById("dropdownMenu").classList.remove("opacity-100");
        
                
                
        
        
            } else {
                document.getElementById("logowhite").classList.add("hidden");
                document.getElementById("logoschwarz").classList.remove("hidden");
                navbarCollapsible.classList.remove('text-white')
                navbarCollapsible.classList.add('bg-white')
                burgerMenu.classList.add('fill-black')
                burgerMenu.classList.remove('fill-white')
            }
        
        };
        
        
        
        
        // Shrink the navbar when page is scrolled
        document.addEventListener('scroll', navbarShrink);
        
        
        //SCROLLSPY
        const c1 = document.querySelector(".vita")
        const c2 = document.querySelector(".projekte")
        const c3 = document.querySelector(".ablauf")
        const items = document.querySelectorAll(".nbar")
        const vita = document.getElementById("vita")
        const projekteContainer = document.getElementById("projekte")
        const ablauf = document.getElementById("ablauf")
        
        
        const observer1 = new IntersectionObserver(entries => {
            if (entries[0].isIntersecting == true){
                items.forEach(element => {
                    element.classList.remove("active");
                });
                c1.classList.add("active");
                
            }else{
                c1.classList.remove("active");
            }
        },{ threshold: 0.3})
        const observer2 = new IntersectionObserver(entries => {
            if (entries[0].isIntersecting == true){
                items.forEach(element => {
                    element.classList.remove("active");
                });
                c2.classList.add("active");
            }else{
                c2.classList.remove("active");
            }
        },{ threshold: 0.3})
        const observer3 = new IntersectionObserver(entries => {
            if (entries[0].isIntersecting == true){
                items.forEach(element => {
                    element.classList.remove("active");
                });
                c3.classList.add("active");
            }else{
                c3.classList.remove("active");
            }
        },{ threshold: 0.3})
        
        try {observer1.observe(vita)} catch {}
        try { observer2.observe(projekteContainer)} catch {}
        try {observer3.observe(ablauf)} catch {}
        
        
        
        
        
        });
        var closeNavbar = function () {
        const navbarCollapsible = document.getElementById("dropdownMenu");
            
            if (!navbarCollapsible.classList.contains("hidden")){
                //document.getElementById("dropdownMenu").classList.add("hidden");
                document.getElementById("logowhite").classList.add("hidden");
                document.getElementById("logoschwarz").classList.remove("hidden");
                document.getElementById("dropdownMenu").classList.add("opacity-0");
                document.getElementById("dropdownMenu").classList.add("hidden");
                document.getElementById("dropdownMenu").classList.remove("opacity-100");
                document.getElementById("dropButton").disabled=false;
            }
        
        }
        document.addEventListener('click', closeNavbar);
        
        function dropDown() {
          console.log("WORKED")
            setTimeout(() => {   
                document.getElementById("logowhite").classList.add("hidden");
                document.getElementById("logoschwarz").classList.remove("hidden");
                document.getElementById("dropdownMenu").classList.remove("hidden");
                document.getElementById("dropdownMenu").classList.add("opacity-100");
                document.getElementById("dropdownMenu").classList.remove("opacity-0");
                document.getElementById("dropButton").disabled=true;
                const navbarCollapsible = document.body.querySelector('#myScrollspy');
                const burgerMenu = document.body.querySelector('#burgerMenu');
                navbarCollapsible.classList.remove('text-white')
                navbarCollapsible.classList.add('bg-white')
                burgerMenu.classList.add('fill-black')
                burgerMenu.classList.remove('fill-white')
            }, 100);
        }
        
        </script>

        
        
	

</html>
